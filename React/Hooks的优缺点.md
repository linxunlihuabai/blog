# Hooks的优缺点

优点

1. 写起来简洁明了，没有那么多api
2. 更容易复用代码，代码量更少。用class组件可能一份代码得在好几个生命周期中写，不利于维护和迭代。（比如一个请求，你可能得在componentDidMount和componentDidUpdate中都写。用hooks的话，都写在useEffect就行了。）
3. 不用考虑this的指向问题
4. 函数式编程

1. 复用代码更容易：hooks 是普通的 JavaScript 函数，所以开发者可以将内置的 hooks 组合到处理 state 逻辑的自定义 hooks中，这样复杂的问题可以转化一个单一职责的函数，并可以被整个应用或者 React 社区所使用；
2. 使用组合方式更优雅：不同于 render props 或高阶组件等的模式，hooks 不会在组件树中引入不必要的嵌套，也不会受到 mixins 的负面影响；
3. 更少的代码量：一个 useEffect 执行单一职责，可以干掉生命周期函数中的重复代码。避免将同一职责代码分拆在几个生命周期函数中，更好的复用能力可以帮助优 秀的开发者最大限度降低代码量；
4. 代码逻辑更清晰（提升代码的可读性和维护性）：hooks 帮助开发者将组件拆分为功能独立的函数单元，轻松做到“分离关注点”，代码逻辑更加清晰易懂； 
5. 单元测试：处理 state 逻辑的自定义 hooks 可以被独立进行单元测试，更加可靠；

缺点

1. 闭包陷阱，你可能拿到旧的props和state
2. 每次render都会重新创建函数，不利于React.memo进行性能优化。

# Hooks的动机

1. 在组件之间复用状态逻辑很难：在hooks出来之前，常见的代码重用方式是 HOC 和render props，这两种方式带来的问题是：你需要解构自己的组件，同时会带来很深的组件嵌套
2. 复杂组件变得难以理解：在class组件中有各种生命周期，代码逻辑被分散在各处，理解和维护代码逻辑比较吃力
3. 难以理解的 class：class组件需要考虑this的指向。