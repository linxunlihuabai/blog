# XSS攻击

XSS也叫跨站脚本攻击，XSS攻击指的是再浏览器中执行恶意脚本获取用户信息从而进行操作。

XSS攻击可分为反射型XSS、DOM型XSS、存储型XSS

## 反射型XSS

反射型XSS指的是服务端没有过滤直接使用客户端数据的情况。比如构造一个带有恶意脚本的url，然后服务端把这段脚本拼接到html上返回给客户端。客户端接受后解析html执行，其中的恶意脚本也随着执行。恶意脚本是由服务端反射到客户端的。

## DOM型XSS

DOM型XSS和反射型XSS差不多，不过区别是DOM型的XSS不是因为服务端，而是直接发生再浏览器上.

## 存储型XSS

存储型XSS也是最危害最大的XSS攻击。恶意脚本被存储在服务器中，用户访问时被发送到了浏览器，然后被浏览器执行了。这是一种持久性的XSS。最常见的就是在评论区故意输入一段脚本，然后直接提交到了服务端。如果前后端没有做好转义工作，用户访问这段信息，恶意代码就会被执行

## 如何防范XSS

1. 对用户的输入和一些危险的api操作（innerHtml）要做好转义工作，后端也要对提交的数据进行转义过滤。
2. 利用CSP(内容安全政策)，通过设置http的Content-Security-Policy头部或者在前端 <meta> 标签。利用浏览器的CSP可以帮我们过滤掉很多XSS攻击
3. HttpOnly 开启HttpOnly可以禁止js获取cookie，即使被XSS攻击了也无法窃取cookie

